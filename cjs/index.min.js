!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("prop-types")):"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PropsValidator=t(require("prop-types")):e.PropsValidator=t(e[void 0])}(self,(function(e){return(()=>{"use strict";var t={73:t=>{t.exports=e}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{r.r(o),r.d(o,{RunEnv:()=>A,default:()=>D});var e=r(73),t=r.n(e);let n=()=>!0;class i extends Error{struct={propsName:"",value:void 0,expectedType:"",preciseType:""};name="ValidatorError";propsName;info;value;constructor(e,t,n,r){super(e),this.propsName=t,this.info=n,this.value=r}toString(){let e;if(this.info instanceof c||this.info instanceof i)return this.struct={propsName:this.info.propsName,value:"",expectedType:"",preciseType:""},this.info.toString();if(this.info instanceof Error){const t=this.info.message.match(/(?<=(`))([\[\]\w<>\d\.]+)(?=(`))/g);if(!t)return this.info.message;{const[n,r,o,i]=t;e={propsName:n,value:o,expectedType:i,preciseType:r}}}else e=this.info;this.struct=e;const{propsName:t,value:n,expectedType:r,preciseType:o}=e;return`属性:[${t}]的值等于['${n}'],期待为 ${r} 类型/值，实际类型/值： ${o} .`}}class c extends Error{name="ObjectValidatorError";source=[];propsName;constructor(e,t,n){super(e),this.source=n,this.propsName=t}toString(){const e={};return this.source.forEach((t=>{const n=t.toString(),{struct:{propsName:r}}=t;e[r]=n})),e}}const s=Function.call.bind(Object.prototype.toString),a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",u=(Symbol.for("validatorDisplayName"),Function.call.bind(Object.prototype.hasOwnProperty));function p(e){if(null==e)return""+e;const t=f(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function f(e){const t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function l(e){function t(t,n,r,o,i,c){return c=c||r,null==n[r]?t?y(r,n[r],"非空","null/undefined"):null:e(n,r,o,i,c)}const n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function y(e,t,n,r){return new i(`${e} 验证失败`,e,{propsName:e,value:t,expectedType:n,preciseType:r})}function d(e){return l((function(t,n){const r=t[n];if(s(r)!==e){const t=p(r);return y(n,r,e,t)}return null}))}function b(e,t,r=!0){if(n())return null;let o={},s=null;for(const n in e)if("__tag"!==n&&u(e,n))try{if("function"!=typeof e[n]){const e=Error("验证函数类型错误");throw e.name="Invariant Violation",e}s=e[n](t,n,"","",null,a),o[n]=!1==!!s||s instanceof c?s:new i(`${n} 验证失败`,n,s,t[n])}catch(e){o=e;break}return Object.values(o).filter((e=>!0==!!e)).length>0?new Error(function(e){const t={};return Object.keys(e).forEach((n=>{let r=e[n];0!=!!r&&(r instanceof c||(r=r instanceof i?r:new i(`${n} 验证失败`,n,r)),t[n]=r.toString())})),JSON.stringify(t,null,2)}(o)):null}function m(e,t,r){!n()&&console.log(`Validator Error。 [typeSpec.__tag]:[${t.__tag}] =>`,r)}const h={extends:[],getTypeSpec:()=>"{}",extendsFactory:()=>{}},v=e=>{const[t,n]=e.match(/\[object (\w+)\]/)||[];return n},x=(e,t)=>[`${t}.${e}`,`${t}.${e}.isRequired`];const g=(w=e=>{const t=Date.parse(e);return"number"==typeof t&&!isNaN(t)&&t>0},l((function(e,t){const n=e[t];if(w&&!w(n)){const r=p(n);return new Error(`${JSON.stringify(e)}-[${t}]-[${n}] is type ${r} , but expected value is test by Date.parse`)}return null})));var w;const $={buffer:d(s(new ArrayBuffer(0))),dataview:d(s(new DataView(new ArrayBuffer(0)))),uint8:d(s(new Uint8Array)),uint16:d(s(new Uint16Array)),uint32:d(s(new Uint32Array)),int8:d(s(new Int8Array)),int16:d(s(new Int16Array)),int32:d(s(new Int32Array)),float32:d(s(new Float32Array)),float64:d(s(new Float64Array)),uint8clamped:d(s(new Uint8ClampedArray))};function N(e){return function(e){function t(t,n,r){const o=n[r];return null==o?e(n,r):t?new Error(`The \`${r}\` is null/Undefined as required , but its value is ${s(o)}`):null}const n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}((function(t,n){const r=t[n];if(s(r)!==e){const t=p(r);return new Error(`Invalid ${n} value is ${r} ,but expected ${e} but get ${t}`)}return null}))}const E={null:N(s(null)),undefined:N(s(void 0))},S={promise:d(s(new Promise((()=>{}))))},O={dateString:(T=/(\d){4}?-(\d){2}?-(\d){2}? (\d){2}?:(\d){2}?:(\d){2}?/,l((function(e,t){const n=e[t];if(T&&!1===T.test(n)){const r=p(n);return new Error(`${JSON.stringify(e)}-[${t}]-[${n}] is type ${r} , but expected value is test(/^${T}$/)`)}return null}))),date:g,...$,...E,...S};var T,j,A;(j=(window||void 0).Promise.prototype).validator||(j.validator=function(e,t){if(!n()){const n=n=>{const r=t?t(n):n,o=b(e,r);return"object"==typeof n&&null!==n&&Object.defineProperty(n,"__props__error",{configurable:!1,enumerable:!1,get:()=>o}),o&&m&&m(0,e,o),n};return this.then(n)}return this.then((e=>e))}),function(e){e.dev="development",e.prod="production"}(A||(A={}));const _={env:A.dev};var P,L;P=[t(),O,{checkPropTypes:b,boolean:t().bool,function:t().func,shape:function(e){return l((function(t,n,r,o,s){const u=[],p=t[n],l=f(p);if("object"!==l)return y(n,p,"object",l);for(const t in e){const n=e[t];if(!n)continue;const c=n(p,t,r,o,s+"."+t,a);c&&u.push(new i(`${s} 验证失败`,s,c,p))}return u.length>0?new c(`验证错误：${s}`,s,u):null}))},arrayOf:function(e){return l((function(t,n,r,o,c){const s=[],u=t[n];if(!Array.isArray(u))return y(n,u,"[object Array]",f(u));for(let t=0;t<u.length;t++){const n=e(u,t,r,o,c+"["+t+"]",a);n&&s.push(new i(`${c} 验证失败`,c,n,u))}return null}))}},{extendsValidator:function(e,t){_[e]=l(t)},util:{createChainableTypeChecker:l,createExpectedTypeChecker:d,validatorLog:m},apiUtil:{WrapperApi:function(e,t){n();const r=(e,t)=>(Object.keys(e).forEach((n=>{const o=e[n];if("object"==typeof o){let i=t&&t[n];"object"!=typeof i&&(i={}),e[n]=r(o,i)}})),new Proxy(e,{get(e,n){const r=e[n];if("function"==typeof r){const e=t&&t[n]||{};return(...t)=>r(...t).validator(e.spec,e.handler)}return e[n]}}));return r(e,t)}},setEnv:e=>{_.env=e}}],Array.isArray(P)||(P=[P]),P.forEach((e=>Object.getOwnPropertyNames(e).forEach((t=>{const n=e[t];_[t]=n})))),L=_,n=()=>"production"===L.env,function(e){if(!n()){const n={maxDepth:3,topName:"WsPropsType"},r=[null,void 0,1,"",!1,()=>{},Symbol.for(""),new Date,/\w/,Promise.resolve()],o=[[],{}];let i=[];const c={option:n},a=e=>((e=e.toLocaleLowerCase())===v(s({})).toLocaleLowerCase()&&(e="shape($)"),x(e,c.option.topName));r.forEach((e=>{const t=s(e),n=v(t);c[`exec${n}`]=function(e,n,r=!1){return i.find((e=>e.type===t))?.validator[Number(r)]||""}})),c.execAny=function(e,t,n=!1){return i.find((e=>e.type===s(null)))?.validator[Number(n)]||""},c.execUnknown=function(t,n,r=!1){const o=s(n);if(!1==!!i.find((e=>e.type===o))){let t=v(o);if(t=t.toLocaleLowerCase(),!0==!!e[t])return x(t,c.option.topName)[Number(r)]}return c.execAny(t,n,r)},c.execObject=function(e,t,n=!1,r=0,o){const a=i.find((e=>e.type===s({})))||{};if(0===Object.keys(t).length||r===o.maxDepth)return x(a.minType.toLocaleLowerCase(),c.option.topName)[Number(n)];const u={};if(Object.keys(t).forEach((i=>{const c=t[i],s=h.switchExec(c,i,t);s&&typeof s==typeof Function&&(u[i]=s(e,c,n,r+1,o))})),0===r)return u;const{validator:p}=a;return p[Number(n)].replace("$",JSON.stringify(u))},c.execArray=function(e,t=[],n=!1,r=0,o){const c=i.find((e=>e.type===s([])))||{};if(0===t.length||r===o.maxDepth)return c.validator[Number(n)];const a=h.switchExec(t[0]);return`${c.validator[Number(!1)]}Of(${a(e,t[0],!1,r+1,o)})${n?".isRequired":""}`},h.switchExec=function(e,t,n){const r=i.find((t=>t.type===s(e)));let o=null;const a=r?`exec${r.minType}`:null;if(a&&!0==!!c[a])o=c[a];else{const r=h.extends.find((t=>t.test(e)));if(r){const{choice:i,execMap:s}=r,a=i(e,t,n);o=s[a]||c[a]}}return o||c.execAny},h.installType=function(e,t=!1){var n;n=[...r,...o],i=n.map((e=>{const t=s(e),n=v(t);return{type:t,minType:n,validator:a(n)}}))},h.extendsFactory=function(e){e.test&&"function"==typeof e.test&&e.choice&&"function"==typeof e.choice&&e.execMap&&h.extends.unshift(e)},h.__getID=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;let n="";for(let r=0;r<10;r++)n+=e.charAt(Math.floor(Math.random()*t));return n},h.getTypeSpec=function(e,t=!0,r=n){r={...n,...r},c.option=r,h.installType();const o=h.switchExec(e)("",e,t,0,r);return"object"==typeof o&&(o.__tag=`'${h.__getID()}'`),JSON.stringify(o,null,2).replace(/\n/g,"").replace(/"/g,"").replace(/\\/g,"")},(t=h).extendsFactory&&t.extendsFactory({test:e=>{const t=s(new ArrayBuffer(0)),n=v(t);return!(!e||!e.buffer||Object.prototype.toString.call(e.buffer)!==t)||!(!e||!e.constructor||e.constructor.name!==n)},choice:(e,t,n)=>"execTypedArray",execMap:{execTypedArray:function(e,t,n=!1,r=0,o){const i=s(t),c=v(i).toLocaleLowerCase().replace("array","");return`${x(c,o.topName)[Number(n)]}`}}}),function(e){e.extendsFactory&&e.extendsFactory({test:e=>typeof e==typeof 1n,choice:(e,t,n)=>"bigint",execMap:{bigint:function(e,t,n=!1,r=0,o){const i=s(t),c=v(i).toLocaleLowerCase();return`${x(c,o.topName)[Number(n)]}`}}})}(h)}var t;e.PropsPlugin=h}(_);const D=_})(),o})()}));